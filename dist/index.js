!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.WeRegion=n()}(this,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var t=function(t,n){return n={exports:{}},t(n,n.exports),n.exports}(function(t,n){!function(t,e){e(n)}(0,function(t){function n(t,n){return n={exports:{}},t(n,n.exports),n.exports}var e=Math.ceil,r=Math.floor,i=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)},o=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},u=n(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),s=n(function(t){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),a=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},c=function(t,n,e){if(a(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)}}return function(){return t.apply(n,arguments)}},f=function(t){return"object"==typeof t?null!==t:"function"==typeof t},l=function(t){if(!f(t))throw TypeError(t+" is not an object!");return t},h=function(t){try{return!!t()}catch(t){return!0}},v=!h(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),p=u.document,d=f(p)&&f(p.createElement),y=function(t){return d?p.createElement(t):{}},_=!v&&!h(function(){return 7!=Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a}),g=function(t,n){if(!f(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!f(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!f(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!f(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},w=Object.defineProperty,m={f:v?Object.defineProperty:function(t,n,e){if(l(t),n=g(n,!0),l(e),_)try{return w(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},b=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},E=v?function(t,n,e){return m.f(t,n,b(1,e))}:function(t,n,e){return t[n]=e,t},O=function(t,n,e){var r,i,o,a=t&O.F,f=t&O.G,l=t&O.S,h=t&O.P,v=t&O.B,p=t&O.W,d=f?s:s[n]||(s[n]={}),y=d.prototype,_=f?u:l?u[n]:(u[n]||{}).prototype;f&&(e=n);for(r in e)(i=!a&&_&&void 0!==_[r])&&r in d||(o=i?_[r]:e[r],d[r]=f&&"function"!=typeof _[r]?e[r]:v&&i?c(o,u):p&&_[r]==o?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(o):h&&"function"==typeof o?c(Function.call,o):o,h&&((d.virtual||(d.virtual={}))[r]=o,t&O.R&&y&&!y[r]&&E(y,r,o)))};O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;var M=O,k=E,x={}.hasOwnProperty,S=function(t,n){return x.call(t,n)},j={},A={}.toString,C=function(t){return A.call(t).slice(8,-1)},R=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==C(t)?t.split(""):Object(t)},F=function(t){return R(o(t))},P=Math.min,T=function(t){return t>0?P(i(t),9007199254740991):0},Y=Math.max,X=Math.min,D=function(t,n){return(t=i(t))<0?Y(t+n,0):X(t,n)},L=u["__core-js_shared__"]||(u["__core-js_shared__"]={}),N=function(t){return L[t]||(L[t]={})},z=0,I=Math.random(),W=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++z+I).toString(36))},U=N("keys"),q=function(t){return U[t]||(U[t]=W(t))},B=function(t,n,e){for(var r=F(t),i=T(r.length),o=D(e,i);i>o;o++)if(o in r&&r[o]===n)return o||0;return-1},K=q("IE_PROTO"),G=function(t,n){var e,r=F(t),i=0,o=[];for(e in r)e!=K&&S(r,e)&&o.push(e);for(;n.length>i;)S(r,e=n[i++])&&(~B(o,e)||o.push(e));return o},J="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),H=Object.keys||function(t){return G(t,J)},Q=v?Object.defineProperties:function(t,n){l(t);for(var e,r=H(n),i=r.length,o=0;i>o;)m.f(t,e=r[o++],n[e]);return t},V=u.document&&document.documentElement,Z=q("IE_PROTO"),$=function(){},tt=function(){var t,n=y("iframe"),e=J.length;for(n.style.display="none",V.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),tt=t.F;e--;)delete tt.prototype[J[e]];return tt()},nt=Object.create||function(t,n){var e;return null!==t?($.prototype=l(t),e=new $,$.prototype=null,e[Z]=t):e=tt(),void 0===n?e:Q(e,n)},et=n(function(t){var n=N("wks"),e=u.Symbol,r="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=r&&e[t]||(r?e:W)("Symbol."+t))}).store=n}),rt=m.f,it=et("toStringTag"),ot=function(t,n,e){t&&!S(t=e?t:t.prototype,it)&&rt(t,it,{configurable:!0,value:n})},ut={};E(ut,et("iterator"),function(){return this});var st=function(t,n,e){t.prototype=nt(ut,{next:b(1,e)}),ot(t,n+" Iterator")},at=function(t){return Object(o(t))},ct=q("IE_PROTO"),ft=Object.prototype,lt=Object.getPrototypeOf||function(t){return t=at(t),S(t,ct)?t[ct]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ft:null},ht=et("iterator"),vt=!([].keys&&"next"in[].keys()),pt=function(){return this},dt=function(t,n,e,r,i,o,u){st(e,n,r);var s,a,c,f=function(t){if(!vt&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},l=n+" Iterator",h="values"==i,v=!1,p=t.prototype,d=p[ht]||p["@@iterator"]||i&&p[i],y=d||f(i),_=i?h?f("entries"):y:void 0,g="Array"==n?p.entries||d:d;if(g&&(c=lt(g.call(new t)))!==Object.prototype&&ot(c,l,!0),h&&d&&"values"!==d.name&&(v=!0,y=function(){return d.call(this)}),u&&(vt||v||!p[ht])&&E(p,ht,y),j[n]=y,j[l]=pt,i)if(s={values:h?y:f("values"),keys:o?y:f("keys"),entries:_},u)for(a in s)a in p||k(p,a,s[a]);else M(M.P+M.F*(vt||v),n,s);return s},yt=function(t,n){var e,r,u=String(o(t)),s=i(n),a=u.length;return s<0||s>=a?"":(e=u.charCodeAt(s))<55296||e>56319||s+1===a||(r=u.charCodeAt(s+1))<56320||r>57343?u.charAt(s):u.slice(s,s+2)};dt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=yt(n,e),this._i+=t.length,{value:t,done:!1})});var _t=function(){},gt=function(t,n){return{value:n,done:!!t}};dt(Array,"Array",function(t,n){this._t=F(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,gt(1)):"keys"==n?gt(0,e):"values"==n?gt(0,t[e]):gt(0,[e,t[e]])},"values"),j.Arguments=j.Array,_t(),_t(),_t();for(var wt=et("toStringTag"),mt=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],bt=0;bt<5;bt++){var Et=mt[bt],Ot=u[Et],Mt=Ot&&Ot.prototype;Mt&&!Mt[wt]&&E(Mt,wt,Et),j[Et]=j.Array}var kt=function(t,n,e){for(var r in n)e&&t[r]?t[r]=n[r]:E(t,r,n[r]);return t},xt=function(t,n,e,r){if(!(t instanceof n)||void 0!==r&&r in t)throw TypeError(e+": incorrect invocation!");return t},St=function(t,n,e,r){try{return r?n(l(e)[0],e[1]):n(e)}catch(n){var i=t.return;throw void 0!==i&&l(i.call(t)),n}},jt=et("iterator"),At=Array.prototype,Ct=function(t){return void 0!==t&&(j.Array===t||At[jt]===t)},Rt=et("toStringTag"),Ft="Arguments"==C(function(){return arguments}()),Pt=function(t,n){try{return t[n]}catch(t){}},Tt=function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=Pt(n=Object(t),Rt))?e:Ft?C(n):"Object"==(r=C(n))&&"function"==typeof n.callee?"Arguments":r},Yt=et("iterator"),Xt=s.getIteratorMethod=function(t){if(void 0!=t)return t[Yt]||t["@@iterator"]||j[Tt(t)]},Dt=n(function(t){var n={},e={},r=t.exports=function(t,r,i,o,u){var s,a,f,h,v=u?function(){return t}:Xt(t),p=c(i,o,r?2:1),d=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(Ct(v)){for(s=T(t.length);s>d;d++)if((h=r?p(l(a=t[d])[0],a[1]):p(t[d]))===n||h===e)return h}else for(f=v.call(t);!(a=f.next()).done;)if((h=St(f,p,a.value,r))===n||h===e)return h};r.BREAK=n,r.RETURN=e}),Lt=et("species"),Nt=function(t){var n="function"==typeof s[t]?s[t]:u[t];v&&n&&!n[Lt]&&m.f(n,Lt,{configurable:!0,get:function(){return this}})},zt=n(function(t){var n=W("meta"),e=m.f,r=0,i=Object.isExtensible||function(){return!0},o=!h(function(){return i(Object.preventExtensions({}))}),u=function(t){e(t,n,{value:{i:"O"+ ++r,w:{}}})},s=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!f(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!S(t,n)){if(!i(t))return"F";if(!e)return"E";u(t)}return t[n].i},getWeak:function(t,e){if(!S(t,n)){if(!i(t))return!0;if(!e)return!1;u(t)}return t[n].w},onFreeze:function(t){return o&&s.NEED&&i(t)&&!S(t,n)&&u(t),t}}}),It=m.f,Wt=zt.fastKey,Ut=v?"_s":"size",qt=function(t,n){var e,r=Wt(n);if("F"!==r)return t._i[r];for(e=t._f;e;e=e.n)if(e.k==n)return e},Bt={getConstructor:function(t,n,e,r){var i=t(function(t,o){xt(t,i,n,"_i"),t._i=nt(null),t._f=void 0,t._l=void 0,t[Ut]=0,void 0!=o&&Dt(o,e,t[r],t)});return kt(i.prototype,{clear:function(){for(var t=this,n=t._i,e=t._f;e;e=e.n)e.r=!0,e.p&&(e.p=e.p.n=void 0),delete n[e.i];t._f=t._l=void 0,t[Ut]=0},delete:function(t){var n=this,e=qt(n,t);if(e){var r=e.n,i=e.p;delete n._i[e.i],e.r=!0,i&&(i.n=r),r&&(r.p=i),n._f==e&&(n._f=r),n._l==e&&(n._l=i),n[Ut]--}return!!e},forEach:function(t){xt(this,i,"forEach");for(var n,e=c(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(e(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!qt(this,t)}}),v&&It(i.prototype,"size",{get:function(){return o(this[Ut])}}),i},def:function(t,n,e){var r,i,o=qt(t,n);return o?o.v=e:(t._l=o={i:i=Wt(n,!0),k:n,v:e,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[Ut]++,"F"!==i&&(t._i[i]=o)),t},getEntry:qt,setStrong:function(t,n,e){dt(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,e=t._l;e&&e.r;)e=e.p;return t._t&&(t._l=e=e?e.n:t._t._f)?"keys"==n?gt(0,e.k):"values"==n?gt(0,e.v):gt(0,[e.k,e.v]):(t._t=void 0,gt(1))},e?"entries":"values",!e,!0),Nt(n)}},Kt=(Array.isArray,et("species"),m.f),Gt=function(t,n,e){for(var r,i=at(t),o=R(i),u=c(n,e,3),s=T(o.length),a=0,f=void 0;s>a;a++)a in o&&(r=o[a],u(r,a,i));return f},Jt=(function(t,n,e,r,i,o){var s=u[t],a=s,c=a&&a.prototype,l={};v&&"function"==typeof a&&c.forEach&&!h(function(){(new a).entries().next()})?(a=n(function(n,e){xt(n,a,t,"_c"),n._c=new s,void 0!=e&&Dt(e,!0,n.set,n)}),Gt("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var n="add"==t||"set"==t;t in c&&!0&&E(a.prototype,t,function(e,r){if(xt(this,a,t),!n&&o&&!f(e))return"get"==t&&void 0;var i=this._c[t](0===e?0:e,r);return n?this:i})}),"size"in c&&Kt(a.prototype,"size",{get:function(){return this._c.size}})):(a=r.getConstructor(n,t,!0,"set"),kt(a.prototype,e),zt.NEED=!0),ot(a,t),l[t]=a,M(M.G+M.W+M.F,l),r.setStrong(a,t,!0)}("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=Bt.getEntry(this,t);return n&&n.v},set:function(t,n){return Bt.def(this,0===t?0:t,n)}},Bt),function(t,n){var e=[];return Dt(t,!1,e.push,e,n),e});M(M.P+M.R,"Map",{toJSON:function(){if("Map"!=Tt(this))throw TypeError("Map#toJSON isn't generic");return Jt(this)}});var Ht=s.Map,Qt=function(t,n){var e=null;return t.forEach(function(t,r){t===n&&(e=r)}),e},Vt=new(function(t){return t&&t.__esModule?t.default:t}(n(function(t){t.exports={default:Ht,__esModule:!0}})));t.requestAnimationFrame=function(t){if(Vt.has(t))return Vt.get(t);var n=window.requestAnimationFrame(function(n){Vt.delete(t),t(n)});return Vt.set(t,n),n},t.cancelAnimationFrame=function(t){return Vt.delete(Qt(Vt,t)),window.cancelAnimationFrame(t)},Object.defineProperty(t,"__esModule",{value:!0})})}).requestAnimationFrame,n=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();return function(){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,r);var i={width:0,height:0,borderColor:"#0099FF",bodyColor:"rgba(195, 213, 237, 0.6)",lineDash:[4,2],zIndex:9527,move:void 0,end:void 0},o="string"==typeof t?document.querySelector(t):t;if(void 0===o)throw new Error("A element or dom selector must be passed");Object.assign(this,{canvas:o,ctx:o.getContext("2d"),canvasClientRect:o.getBoundingClientRect(),options:Object.assign({},i,e,{width:parseFloat(e.width)||o.parentNode.clientWidth,height:parseFloat(e.height)||o.parentNode.clientHeight})}),this._initCanvas(),this._initEvents()}return e(r,[{key:"_initCanvas",value:function(){var t=this.ctx,n=this.options,e=n.bodyColor,r=n.borderColor,i=n.lineDash;this._initCanvasSize(),t.fillStyle=e,t.strokeStyle=r,t.setLineDash(i)}},{key:"_initCanvasSize",value:function(){var t=this.canvas,n=this.ctx,e=this.options,r=e.width,i=e.height,o=e.zIndex,u=window.devicePixelRatio||1;t.width=r*u,t.height=i*u,n.scale(u,u),t.style.cssText="width:"+r+"px;height:"+i+"px;position:absolute;z-index:"+o}},{key:"_initEvents",value:function(){var t=this.canvas;t.addEventListener("mousedown",this._onMouseDown.bind(this),!1),t.addEventListener("mousemove",this._onMouseMove.bind(this),!1),t.addEventListener("mouseup",this._onMouseUp.bind(this),!1),t.addEventListener("mouseleave",this._onMouseLeave.bind(this),!1)}},{key:"_onMouseDown",value:function(t){this.hasMouseDown=!0;var n=this.canvasClientRect,e=n.top,r=n.left,i=this.startX=this.moveX=t.pageX-r,o=this.startY=this.moveY=t.pageY-e;this._strokRect({startX:i,startY:o})}},{key:"_onMouseMove",value:function(t){if(this.hasMouseDown){var n=this.canvasClientRect,e=n.top,r=n.left,i=this.moveX=t.pageX-r,o=this.moveY=t.pageY-e;this._strokRect({moveX:i,moveY:o})}}},{key:"_onMouseUp",value:function(){if(this.hasMouseDown){this.hasMouseDown=!1;var t=this.startX,n=this.startY,e=this.moveX,r=this.moveY,i=this.width=e-t,o=this.height=r-n;"function"==typeof this.options.end&&this.options.end({startX:t,startY:n,width:i,height:o}),this.clear()}}},{key:"_onMouseLeave",value:function(){this._onMouseUp()}},{key:"_strokRect",value:function(n){var e=this,r=n.moveX,i=n.moveY;t(function(){var t=e.ctx,n=e.startX,o=e.startY;e.clear();var u=e.width=r-n,s=e.height=i-o;t.strokeRect(n,o,u,s),t.fillRect(n,o,u,s),"function"==typeof e.options.move&&e.options.move({startX:n,startY:o,width:u,height:s})})}},{key:"clear",value:function(){var t=this.canvas;this.ctx.clearRect(0,0,t.width,t.height)}},{key:"isRectCross",value:function(t){var n=t.x,e=t.y,r=t.w,i=t.h,o=this.startX,u=this.startY,s=this.width,a=this.height,c=r/2+n,f=i/2+e,l=s/2+o,h=a/2+u,v=Math.abs(l-c)<=r/2+Math.abs(s/2),p=Math.abs(h-f)<=i/2+Math.abs(a/2);return v&&p}}]),r}()});
