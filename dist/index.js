!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.WeRegion=e()}(this,function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();return function(){function i(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,i);var n={className:"",width:0,height:0,strokeStyle:"#0099FF",fillStyle:"rgba(195, 213, 237, 0.6)",lineDash:[4,2],zIndex:9527},o="string"==typeof e?document.querySelector(e):e;if(void 0===o)throw new Error("A element or dom selector must be passed");Object.assign(this,{canvas:o,ctx:o.getContext("2d"),canvasClientRect:o.getBoundingClientRect(),options:Object.assign({},n,s,{width:parseFloat(s.width)||o.parentNode.clientWidth,height:parseFloat(s.height)||o.parentNode.clientHeight})}),this._initCanvas(),this._initEvents()}return e(i,[{key:"_initCanvas",value:function(){var t=this.ctx,e=this.options,i=e.fillStyle,s=e.strokeStyle,n=e.lineDash;this._initCanvasSize(),t.fillStyle=i,t.strokeStyle=s,t.setLineDash(n)}},{key:"_initCanvasSize",value:function(){var t=this.canvas,e=this.ctx,i=this.options,s=i.width,n=i.height,o=i.zIndex,a=window.devicePixelRatio||1;t.width=s*a,t.height=n*a,e.scale(a,a),t.style.cssText="width:"+s+"px;height:"+n+"px;position:absolute;z-index:"+o}},{key:"_initEvents",value:function(){var t=this.canvas;t.addEventListener("mousedown",this._onMouseDown.bind(this),!1),t.addEventListener("mousemove",this._onMouseMove.bind(this),!1),t.addEventListener("mouseup",this._onMouseUp.bind(this),!1),t.addEventListener("mouseleave",this._onMouseLeave.bind(this),!1)}},{key:"_onMouseDown",value:function(t){this.hasMouseDown=!0;var e=this.canvasClientRect,i=e.top,s=e.left,n=this.startX=t.pageX-s,o=this.startY=t.pageY-i;this._strokRect({startX:n,startY:o})}},{key:"_onMouseMove",value:function(t){if(this.hasMouseDown){var e=this.canvasClientRect,i=e.top,s=e.left,n=this.moveX=t.pageX-s,o=this.moveY=t.pageY-i;this._strokRect({moveX:n,moveY:o})}}},{key:"_onMouseUp",value:function(){if(this.hasMouseDown){this.hasMouseDown=!1;var t=this.startX,e=this.startY,i=this.moveX,s=this.moveY,n=this.width=i-t,o=this.height=s-e;"function"==typeof this.options.end&&this.options.end({startX:t,startY:e,width:n,height:o}),this._clear()}}},{key:"_onMouseLeave",value:function(){this._onMouseUp()}},{key:"_strokRect",value:function(t){var e=t.moveX,i=t.moveY,s=this.ctx,n=this.startX,o=this.startY;this._clear();var a=this.width=e-n,h=this.height=i-o;s.strokeRect(n,o,a,h),s.fillRect(n,o,a,h),"function"==typeof this.options.move&&this.options.move({startX:n,startY:o,width:a,height:h})}},{key:"_clear",value:function(){var t=this.canvas;this.ctx.clearRect(0,0,t.width,t.height)}},{key:"isCross",value:function(t){var e=t.x,i=t.y,s=t.w,n=t.h,o=this.startX,a=this.startY,h=this.width,r=this.height,u=s/2+e,c=n/2+i,v=h/2+o,l=r/2+a,d=Math.abs(v-u)<=s/2+Math.abs(h/2),f=Math.abs(l-c)<=n/2+Math.abs(r/2);return d&&f}}]),i}()});
